import { BigNumber } from '@ethersproject/bignumber';
import { expect } from 'earljs';

import Coder from '../src';

import * as erc20Abi from './abi/erc20.json';
import * as marketAbi from './abi/market.json';
import * as tokenAbi from './abi/token.json';
import * as wethAbi from './abi/weth.json';
import * as zeroExAbi from './abi/zeroEx.json';

describe('Coder', () => {
	const erc20Coder = new Coder(erc20Abi);
	const marketCoder = new Coder(marketAbi);
	const tokenCoder = new Coder(tokenAbi);
	const wethCoder = new Coder(wethAbi);
	const zeroExCoder = new Coder(zeroExAbi);

	it('forms function selector', () => {
		expect(wethCoder.getFunctionSelector('transfer')).toEqual('0xa9059cbb');
		expect(erc20Coder.getFunctionSelector('totalSupply')).toEqual('0x18160ddd');
		expect(zeroExCoder.getFunctionSelector('batchExecuteTransactions')).toEqual(
			'0xfc74896d',
		);
	});
	it('forms event topic', () => {
		expect(marketCoder.getEventTopic('Init')).toEqual(
			'0x57a86f7d14ccde89e22870afe839e3011216827daa9b24e18629f0a1e9d6cc14',
		);
		expect(erc20Coder.getEventTopic('Transfer')).toEqual(
			'0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef',
		);
		expect(marketCoder.getEventTopic('NewMarketplace')).toEqual(
			'0x44c1325bfcaffc6218fee9f77391dac11c5b3720b1466a6dc54203d076bed8cc',
		);
	});

	it('decodes event', () => {
		const initEvent = marketCoder.decodeEvent(
			['0x57a86f7d14ccde89e22870afe839e3011216827daa9b24e18629f0a1e9d6cc14'],
			'0x',
		);
		expect(initEvent?.name).toEqual('Init');
		expect(initEvent?.inputs.length).toEqual(initEvent?.values.length);
		expect(initEvent?.values).toEqual([]);

		const withdrawalEvent = wethCoder.decodeEvent(
			[
				'0x7fcf532c15f0a6db0bd6d0e038bea71d30d808c7d98cb3bf7268a95bf5081b65',
				'0x0000000000000000000000008939b49a0983a9e6ef416c23ccd8b04af0e8a006',
			],
			'0x00000000000000000000000000000000000000000000000006f05b59d3b20000',
		);
		expect(withdrawalEvent?.name).toEqual('Withdrawal');
		expect(withdrawalEvent?.inputs.length).toEqual(
			withdrawalEvent?.values.length,
		);
		expect(withdrawalEvent?.values).toEqual([
			'0x8939B49A0983A9E6eF416C23cCd8B04aF0E8A006',
			BigNumber.from('500000000000000000'),
		]);

		const transferEvent = erc20Coder.decodeEvent(
			[
				'0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef',
				'0x000000000000000000000000b5cfcb4d4745cbbd252945856e1b6eaadcf2fc4e',
				'0x000000000000000000000000694c6aea9444876d4fa9375fc9089c370f8e9eda',
			],
			'0x0000000000000000000000000000000000000000000000370c9b5ef669c35300',
		);
		expect(transferEvent?.name).toEqual('Transfer');
		expect(transferEvent?.inputs.length).toEqual(transferEvent?.values.length);
		expect(transferEvent?.values).toEqual([
			'0xb5CFcb4D4745cBBD252945856E1B6eaadCf2fC4E',
			'0x694c6aea9444876d4fA9375fC9089C370F8E9edA',
			BigNumber.from('1015479348216300000000'),
		]);

		const fillEvent = zeroExCoder.decodeEvent(
			[
				'0x6869791f0a34781b29882982cc39e882768cf2c96995c2a110c577c53bc932d5',
				'0x0000000000000000000000007b1886e49ab5433bb46f7258548092dc8cdca28b',
				'0x0000000000000000000000001000000000000000000000000000000000000011',
				'0x9039f36033ca5ec4d518a26ce468a9c8d31bdbe9f9aa65767fa50f8c10b2019d',
			],
			'0x000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000220000000000000000000000000000000000000000000000000000000000000024000000000000000000000000058e327d64fc77fa36f698989623c3e4f058c8a8900000000000000000000000058e327d64fc77fa36f698989623c3e4f058c8a89000000000000000000000000000000000000000000000001e5b8fa8fe2ac000000000000000000000000000000000000000000000000000000000020574983050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024f47261b0000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024f47261b0000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb480000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
		);
		expect(fillEvent?.name).toEqual('Fill');
		expect(fillEvent?.inputs.length).toEqual(fillEvent?.values.length);
		expect(fillEvent?.values).toEqual([
			'0x7b1886e49AB5433bb46f7258548092DC8CdCA28B',
			'0x1000000000000000000000000000000000000011',
			'0xf47261b0000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',
			'0xf47261b0000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',
			'0x',
			'0x',
			'0x9039f36033ca5ec4d518a26ce468a9c8d31bdbe9f9aa65767fa50f8c10b2019d',
			'0x58e327D64Fc77fA36f698989623c3E4f058C8a89',
			'0x58e327D64Fc77fA36f698989623c3E4f058C8a89',
			BigNumber.from('35000000000000000000'),
			BigNumber.from('138903388933'),
			BigNumber.from('0'),
			BigNumber.from('0'),
			BigNumber.from('0'),
		]);
	});

	it('decodes function', () => {
		const depositFunction = wethCoder.decodeFunction('0xd0e30db0');
		expect(depositFunction?.name).toEqual('deposit');
		expect(depositFunction?.inputs.length).toEqual(
			depositFunction?.values.length,
		);
		expect(depositFunction?.values).toEqual([]);

		const transferFunction = erc20Coder.decodeFunction(
			'0xa9059cbb000000000000000000000000694c6aea9444876d4fa9375fc9089c370f8e9eda0000000000000000000000000000000000000000000000370c9b5ef669c35300',
		);
		expect(transferFunction?.name).toEqual('transfer');
		expect(transferFunction?.inputs.length).toEqual(
			transferFunction?.values.length,
		);
		expect(transferFunction?.values).toEqual([
			'0x694c6aea9444876d4fA9375fC9089C370F8E9edA',
			BigNumber.from('1015479348216300000000'),
		]);

		const matchOrdersFunction = zeroExCoder.decodeFunction(
			'0x88ec79fb00000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000340000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000006800000000000000000000000007b1886e49ab5433bb46f7258548092dc8cdca28b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e5b8fa8fe2ac00000000000000000000000000000000000000000000000000000000002057498305000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000061c14b5a0000000000000000000000000000000000000000000000000000017ddb0db67600000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000220000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000000000002a00000000000000000000000000000000000000000000000000000000000000024f47261b0000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024f47261b0000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb4800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007b1886e49ab5433bb46f7258548092dc8cdca28b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000001100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004c910e13ea0000000000000000000000000000000000000000000000047cf0a3a070260000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000061c14b760000000000000000000000000000000000000000000000000000017ddb0e59b100000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000220000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000000000002a00000000000000000000000000000000000000000000000000000000000000024f47261b0000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024f47261b0000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000421ba64ca0f6f8ca7943163ec02ff09cad3e54c2ff74fc325849cd9f8cbee0826cee16d8fc0e36ed44fe9695499e6803768668a4d0a96ae4da7e5fe8d86604a9ef1c0300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000421cb4ca963bc1bf9e9ffe3c5e8ea2f9c38a716cd0ff0ec26a808dd31813d2651bc039dd04a26f9ffbfde14ed84e466ba9dcf74a84aedeacd4e375a1620dd1e9273603000000000000000000000000000000000000000000000000000000000000',
		);
		expect(matchOrdersFunction?.name).toEqual('matchOrders');
		expect(matchOrdersFunction?.inputs.length).toEqual(
			matchOrdersFunction?.values.length,
		);
		expect(matchOrdersFunction?.values).toEqual([
			[
				'0x7b1886e49AB5433bb46f7258548092DC8CdCA28B',
				'0x0000000000000000000000000000000000000000',
				'0x1000000000000000000000000000000000000011',
				'0x0000000000000000000000000000000000000000',
				BigNumber.from('35000000000000000000'),
				BigNumber.from('138903388933'),
				BigNumber.from('0'),
				BigNumber.from('0'),
				BigNumber.from('1640057690'),
				BigNumber.from('1640057648758'),
				'0xf47261b0000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',
				'0xf47261b0000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',
				'0x',
				'0x',
			],
			[
				'0x7b1886e49AB5433bb46f7258548092DC8CdCA28B',
				'0x0000000000000000000000000000000000000000',
				'0x1000000000000000000000000000000000000011',
				'0x0000000000000000000000000000000000000000',
				BigNumber.from('328851133418'),
				BigNumber.from('82789851859423461376'),
				BigNumber.from('0'),
				BigNumber.from('0'),
				BigNumber.from('1640057718'),
				BigNumber.from('1640057690545'),
				'0xf47261b0000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',
				'0xf47261b0000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',
				'0x',
				'0x',
			],
			'0x1ba64ca0f6f8ca7943163ec02ff09cad3e54c2ff74fc325849cd9f8cbee0826cee16d8fc0e36ed44fe9695499e6803768668a4d0a96ae4da7e5fe8d86604a9ef1c03',
			'0x1cb4ca963bc1bf9e9ffe3c5e8ea2f9c38a716cd0ff0ec26a808dd31813d2651bc039dd04a26f9ffbfde14ed84e466ba9dcf74a84aedeacd4e375a1620dd1e9273603',
		]);
	});

	it('decodes constructor', () => {
		const c = tokenCoder.decodeConstructor(
			'0x44616920537461626c65636f696e0000000000000000000000000000000000004441490000000000000000000000000000000000000000000000000000000000',
		);

		expect(c?.inputs.length).toEqual(c?.values.length);
		expect(c?.values).toEqual([
			'0x44616920537461626c65636f696e000000000000000000000000000000000000',
			'0x4441490000000000',
		]);
	});

	it('encodes event', () => {
		expect(
			marketCoder.encodeEvent({
				name: 'Init',
				inputs: [],
				values: [],
			}),
		).toEqual({
			topics: [
				'0x57a86f7d14ccde89e22870afe839e3011216827daa9b24e18629f0a1e9d6cc14',
			],
			data: '0x',
		});
		expect(
			wethCoder.encodeEvent({
				name: 'Withdrawal',
				inputs: [
					{
						indexed: true,
						name: 'src',
						type: 'address',
					},
					{
						indexed: false,
						name: 'wad',
						type: 'uint256',
					},
				],
				values: [
					'0x8939b49a0983a9e6ef416c23ccd8b04af0e8a006',
					'500000000000000000',
				],
			}),
		).toEqual({
			topics: [
				'0x7fcf532c15f0a6db0bd6d0e038bea71d30d808c7d98cb3bf7268a95bf5081b65',
				'0x0000000000000000000000008939b49a0983a9e6ef416c23ccd8b04af0e8a006',
			],
			data: '0x00000000000000000000000000000000000000000000000006f05b59d3b20000',
		});
		expect(
			erc20Coder.encodeEvent({
				name: 'Transfer',
				inputs: [
					{
						name: 'from',
						type: 'address',
						components: undefined,
						indexed: true,
					},
					{
						name: 'to',
						type: 'address',
						components: undefined,
						indexed: true,
					},
					{
						name: 'amount',
						type: 'uint256',
						components: undefined,
						indexed: false,
					},
				],
				values: [
					'0xb5cfcb4d4745cbbd252945856e1b6eaadcf2fc4e',
					'0x694c6aea9444876d4fa9375fc9089c370f8e9eda',
					'1015479348216300000000',
				],
			}),
		).toEqual({
			topics: [
				'0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef',
				'0x000000000000000000000000b5cfcb4d4745cbbd252945856e1b6eaadcf2fc4e',
				'0x000000000000000000000000694c6aea9444876d4fa9375fc9089c370f8e9eda',
			],
			data: '0x0000000000000000000000000000000000000000000000370c9b5ef669c35300',
		});
		expect(
			zeroExCoder.encodeEvent({
				name: 'Fill',
				inputs: [
					{
						indexed: true,
						name: 'makerAddress',
						type: 'address',
					},
					{
						indexed: true,
						name: 'feeRecipientAddress',
						type: 'address',
					},
					{
						indexed: false,
						name: 'makerAssetData',
						type: 'bytes',
					},
					{
						indexed: false,
						name: 'takerAssetData',
						type: 'bytes',
					},
					{
						indexed: false,
						name: 'makerFeeAssetData',
						type: 'bytes',
					},
					{
						indexed: false,
						name: 'takerFeeAssetData',
						type: 'bytes',
					},
					{
						indexed: true,
						name: 'orderHash',
						type: 'bytes32',
					},
					{
						indexed: false,
						name: 'takerAddress',
						type: 'address',
					},
					{
						indexed: false,
						name: 'senderAddress',
						type: 'address',
					},
					{
						indexed: false,
						name: 'makerAssetFilledAmount',
						type: 'uint256',
					},
					{
						indexed: false,
						name: 'takerAssetFilledAmount',
						type: 'uint256',
					},
					{
						indexed: false,
						name: 'makerFeePaid',
						type: 'uint256',
					},
					{
						indexed: false,
						name: 'takerFeePaid',
						type: 'uint256',
					},
					{
						indexed: false,
						name: 'protocolFeePaid',
						type: 'uint256',
					},
				],
				values: [
					'0x7b1886e49ab5433bb46f7258548092dc8cdca28b',
					'0x1000000000000000000000000000000000000011',
					'0xf47261b0000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',
					'0xf47261b0000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',
					'0x',
					'0x',
					'0x9039f36033ca5ec4d518a26ce468a9c8d31bdbe9f9aa65767fa50f8c10b2019d',
					'0x58e327d64fc77fa36f698989623c3e4f058c8a89',
					'0x58e327d64fc77fa36f698989623c3e4f058c8a89',
					'35000000000000000000',
					'138903388933',
					'0',
					'0',
					'0',
				],
			}),
		).toEqual({
			topics: [
				'0x6869791f0a34781b29882982cc39e882768cf2c96995c2a110c577c53bc932d5',
				'0x0000000000000000000000007b1886e49ab5433bb46f7258548092dc8cdca28b',
				'0x0000000000000000000000001000000000000000000000000000000000000011',
				'0x9039f36033ca5ec4d518a26ce468a9c8d31bdbe9f9aa65767fa50f8c10b2019d',
			],
			data: '0x000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000220000000000000000000000000000000000000000000000000000000000000024000000000000000000000000058e327d64fc77fa36f698989623c3e4f058c8a8900000000000000000000000058e327d64fc77fa36f698989623c3e4f058c8a89000000000000000000000000000000000000000000000001e5b8fa8fe2ac000000000000000000000000000000000000000000000000000000000020574983050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024f47261b0000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024f47261b0000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb480000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
		});
	});

	it('encodes function', () => {
		expect(
			wethCoder.encodeFunction({ name: 'deposit', inputs: [], values: [] }),
		).toEqual('0xd0e30db0');
		expect(
			erc20Coder.encodeFunction({
				name: 'transfer',
				inputs: [
					{
						name: 'from',
						type: 'address',
						components: undefined,
					},
					{
						name: 'amount',
						type: 'uint256',
						components: undefined,
					},
				],
				values: [
					'0x694c6aea9444876d4fA9375fC9089C370F8E9edA',
					'1015479348216300000000',
				],
			}),
		).toEqual(
			'0xa9059cbb000000000000000000000000694c6aea9444876d4fa9375fc9089c370f8e9eda0000000000000000000000000000000000000000000000370c9b5ef669c35300',
		);
		expect(
			zeroExCoder.encodeFunction({
				name: 'matchOrders',
				inputs: [
					{
						name: 'leftOrder',
						type: 'tuple',
					},
					{
						name: 'rightOrder',
						type: 'tuple',
					},
					{
						name: 'leftSignature',
						type: 'bytes',
					},
					{
						name: 'rightSignature',
						type: 'bytes',
					},
				],
				values: [
					{
						makerAddress: '0x7b1886e49AB5433bb46f7258548092DC8CdCA28B',
						takerAddress: '0x0000000000000000000000000000000000000000',
						feeRecipientAddress: '0x1000000000000000000000000000000000000011',
						senderAddress: '0x0000000000000000000000000000000000000000',
						makerAssetAmount: '35000000000000000000',
						takerAssetAmount: '138903388933',
						makerFee: '0',
						takerFee: '0',
						expirationTimeSeconds: '1640057690',
						salt: '1640057648758',
						makerAssetData:
							'0xf47261b0000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',
						takerAssetData:
							'0xf47261b0000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',
						makerFeeAssetData: '0x',
						takerFeeAssetData: '0x',
					},
					{
						makerAddress: '0x7b1886e49AB5433bb46f7258548092DC8CdCA28B',
						takerAddress: '0x0000000000000000000000000000000000000000',
						feeRecipientAddress: '0x1000000000000000000000000000000000000011',
						senderAddress: '0x0000000000000000000000000000000000000000',
						makerAssetAmount: '328851133418',
						takerAssetAmount: '82789851859423461376',
						makerFee: '0',
						takerFee: '0',
						expirationTimeSeconds: '1640057718',
						salt: '1640057690545',
						makerAssetData:
							'0xf47261b0000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',
						takerAssetData:
							'0xf47261b0000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',
						makerFeeAssetData: '0x',
						takerFeeAssetData: '0x',
					},
					'0x1ba64ca0f6f8ca7943163ec02ff09cad3e54c2ff74fc325849cd9f8cbee0826cee16d8fc0e36ed44fe9695499e6803768668a4d0a96ae4da7e5fe8d86604a9ef1c03',
					'0x1cb4ca963bc1bf9e9ffe3c5e8ea2f9c38a716cd0ff0ec26a808dd31813d2651bc039dd04a26f9ffbfde14ed84e466ba9dcf74a84aedeacd4e375a1620dd1e9273603',
				],
			}),
		).toEqual(
			'0x88ec79fb00000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000340000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000006800000000000000000000000007b1886e49ab5433bb46f7258548092dc8cdca28b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e5b8fa8fe2ac00000000000000000000000000000000000000000000000000000000002057498305000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000061c14b5a0000000000000000000000000000000000000000000000000000017ddb0db67600000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000220000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000000000002a00000000000000000000000000000000000000000000000000000000000000024f47261b0000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024f47261b0000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb4800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007b1886e49ab5433bb46f7258548092dc8cdca28b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000001100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004c910e13ea0000000000000000000000000000000000000000000000047cf0a3a070260000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000061c14b760000000000000000000000000000000000000000000000000000017ddb0e59b100000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000220000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000000000002a00000000000000000000000000000000000000000000000000000000000000024f47261b0000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024f47261b0000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000421ba64ca0f6f8ca7943163ec02ff09cad3e54c2ff74fc325849cd9f8cbee0826cee16d8fc0e36ed44fe9695499e6803768668a4d0a96ae4da7e5fe8d86604a9ef1c0300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000421cb4ca963bc1bf9e9ffe3c5e8ea2f9c38a716cd0ff0ec26a808dd31813d2651bc039dd04a26f9ffbfde14ed84e466ba9dcf74a84aedeacd4e375a1620dd1e9273603000000000000000000000000000000000000000000000000000000000000',
		);
	});

	it('encodes constructor', () => {
		expect(
			tokenCoder.encodeConstructor({
				inputs: [
					{
						name: 'name',
						type: 'bytes32',
						components: undefined,
					},
					{
						name: 'symbol',
						type: 'bytes8',
						components: undefined,
					},
				],
				values: [
					'0x44616920537461626c65636f696e000000000000000000000000000000000000',
					'0x4441490000000000',
				],
			}),
		).toEqual(
			'0x0x44616920537461626c65636f696e0000000000000000000000000000000000004441490000000000000000000000000000000000000000000000000000000000',
		);
	});
});
